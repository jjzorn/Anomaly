# Events

Games in Anomaly are programmed by describing what should happen on certain events. To respond to
an event, simply write a function in Lua with the appropriate name and number of arguments. To see
which ways there are to modify the game state, look at [Functions](Functions.md).

## on_reload()

This function will be called after the game is started or reloaded, and can be used to initialize
state that is not supposed to be kept between reloads.

## on_tick(dt)

```on_tick``` is called on every server tick, where ```dt``` (delta time) indicates the time (in
seconds) the last server tick took. This function is called after all player inputs for this frame
have been processed, and should be used as the primary function for simulating game state and
drawing.

## on_join(player, has_touch)

```on_join``` is called whenever a new player joins the game, with ```player``` being their player
ID. ```has_touch``` indicates whether the player joined using a mobile device, which might require
using different input methods than a player that joined using a desktop computer.

## on_quit(player)

```on_quit``` is the opposite of ```on_join``` and is called when a player leaves the game again.
```player``` is, just like for ```on_join```, the player ID.

## on_key_down(player, key)

This function is executed when ```player``` starts pressing ```key``` (for a list of keys, see
[Keys](Keys.md)). If the player presses ```key``` long enough, this might (depending on the OS)
generate multiple such events.

## on_key_up(player, key)

This is the opposite of ```on_key_down```, and is called whenever ```player``` stops pressing
```key```. In contrast to ```on_key_down```, this will never be called multiple times for the
same ```key``` without an ```on_key_down``` in between.

## on_finger_down(player, finger, x, y)

This function is called when ```player``` touches their screen at coordinates ```x```, ```y```.
```finger``` is the finger ID, basically the number of the finger assigned. Finger IDs start
counting on 0, and then increase the more fingers the player touches their screen with at the same
time.

## on_finger_up(player, finger, x, y)

Just like ```on_finger_down```, just when the player releases their finger again.

## on_finger_motion(player, finger, x, y)

This indicates that the finger with ID ```finger``` moved to a new position indicated by ```x```,
```y```. Finger movement does not necessarily have to be continuous, meaning that the game
developer should not rely on the coordinates from the last ```on_finger_motion``` are the same as
the coordinates for ```on_finger_up```.

## on_mouse_button_down(player, button, x, y)

This event is generated when ```player``` presses ```button``` (which can be any of ```'Left'```,
```'Middle'```, ```'Right'```, ```'Extra 1'```, ```'Extra 2'```) at coordinates ```x```, ```y```.

## on_mouse_button_up(player, button, x, y)

The same as ```on_mouse_button_down```, but called when ```button``` is released again.

## on_mouse_motion(player, x, y)

Similar to ```on_finger_motion```, just for mice.

## on_mouse_wheel(player, x, y)

This function is called when ```player``` scrolls their mouse wheel. ```y``` is the vertical
scrolling direction, where a positive value indicates scrolling away from the user, whereas a
negative value indicates scrolling towards the user. ```x``` is the horizontal scrolling direciton,
which is relatively uncommon for mice, but it might be generated by some touchpads. Negative values
indicate scrolling left, positive values indicate scrolling right.
